<Page
      x:Class="Sklad_2.Views.CashRegisterPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:viewmodels="using:Sklad_2.ViewModels"
          xmlns:models="using:Sklad_2.Models"
          xmlns:converters="using:Sklad_2.Converters"
          mc:Ignorable="d"
          Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
    <Page.Resources>
        <converters:CurrencyConverter x:Key="InlineCurrencyConverter"/>
        <converters:DecimalConverter x:Key="InlineDecimalConverter"/>
    </Page.Resources>

  <Grid Padding="24">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <TextBlock Grid.Row="0" Text="Pokladna" Style="{ThemeResource TitleTextBlockStyle}"
  Margin="0,0,0,24"/>

    <StackPanel Grid.Row="1" Spacing="24">
      <!-- Aktuální stav pokladny -->
      <Border Style="{StaticResource CardBorderStyle}" Shadow="{ThemeResource CardShadow}">
        <StackPanel Spacing="12">
                        <TextBlock Text="Aktuální hotovost v pokladně" Style="{ThemeResource SubtitleTextBlockStyle}"/>
                        <TextBlock Text="{x:Bind ViewModel.CurrentCashInTill, Mode=OneWay, Converter={StaticResource InlineCurrencyConverter}}" Style="{ThemeResource DisplayTextBlockStyle}" FontWeight="Bold"/>
                    </StackPanel>
                </Border>

      <!-- Vklad -->
      <Border Style="{StaticResource CardBorderStyle}" Shadow="{ThemeResource CardShadow}">
        <StackPanel Spacing="12">
          <TextBlock Text="Vklad" Style="{ThemeResource SubtitleTextBlockStyle}"/>
          <TextBox Header="Částka" PlaceholderText="Zadejte částku..." Text="{x:Bind ViewModel.DepositAmount, Mode=TwoWay, Converter={StaticResource InlineDecimalConverter}}" InputScope="Number"/>
          <Button Content="Provést Vklad" Command="{x:Bind ViewModel.MakeDepositCommand}" HorizontalAlignment="Right"/>
        </StackPanel>
      </Border>

      <!-- Denní kontrola pokladny -->
      <Border Style="{StaticResource CardBorderStyle}" Shadow="{ThemeResource CardShadow}">
        <StackPanel Spacing="12">
          <TextBlock Text="Denní kontrola pokladny" Style="{ThemeResource
  SubtitleTextBlockStyle}"/>
          <TextBox Header="Skutečná hotovost" PlaceholderText="Zadejte skutečnou hotovost..."
  Text="{x:Bind ViewModel.ActualAmountForReconciliation, Mode=TwoWay, Converter={StaticResource InlineDecimalConverter}}" InputScope="Number"/>
          <Button Content="Provést kontrolu" Command="{x:Bind ViewModel.PerformDailyReconciliationCommand}" HorizontalAlignment="Right"/>
        </StackPanel>
      </Border>

      <!-- Historie transakcí -->
      <Border Style="{StaticResource CardBorderStyle}" Shadow="{ThemeResource CardShadow}">
        <StackPanel Spacing="12">
          <TextBlock Text="Historie transakcí" Style="{ThemeResource SubtitleTextBlockStyle}"/>
          <ListView ItemsSource="{x:Bind ViewModel.CashRegisterHistory, Mode=OneWay}">
            <ListView.ItemTemplate>
              <DataTemplate x:DataType="models:CashRegisterEntry">
                <Grid ColumnSpacing="12">
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                  </Grid.ColumnDefinitions>
                  <TextBlock Grid.Column="0" Text="{x:Bind Timestamp}"
  FontWeight="SemiBold"/>
                  <TextBlock Grid.Column="1" Text="{x:Bind Description}"/>
                  <TextBlock Grid.Column="2" Text="{x:Bind Amount,
  Converter={StaticResource InlineCurrencyConverter}}" HorizontalAlignment="Right"/>
                  <TextBlock Grid.Column="3" Text="{x:Bind CurrentCashInTill,
  Mode=OneWay, Converter={StaticResource InlineCurrencyConverter}}" HorizontalAlignment="Right"
  FontWeight="Bold"/>
                </Grid>
              </DataTemplate>
            </ListView.ItemTemplate>
          </ListView>
        </StackPanel>
      </Border>
    </StackPanel>
  </Grid>
</Page>