<Page
      x:Class="Sklad_2.Views.CashRegisterPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:viewmodels="using:Sklad_2.ViewModels"
          xmlns:models="using:Sklad_2.Models"
          xmlns:converters="using:Sklad_2.Converters"
          mc:Ignorable="d"
          Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
    <Page.Resources>
        <converters:CurrencyConverter x:Key="InlineCurrencyConverter"/>
        <converters:DecimalConverter x:Key="InlineDecimalConverter"/>
    </Page.Resources>

  <Grid Padding="24">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <TextBlock Grid.Row="0" Text="Pokladna" Style="{ThemeResource TitleTextBlockStyle}"
  Margin="0,0,0,24"/>

    <StackPanel Grid.Row="1" Spacing="24">
      <!-- Aktuální stav pokladny -->
      <Border Style="{StaticResource CardBorderStyle}" Shadow="{ThemeResource CardShadow}">
        <StackPanel Spacing="12">
                        <TextBlock Text="Aktuální hotovost v pokladně" Style="{ThemeResource SubtitleTextBlockStyle}"/>
                        <TextBlock Text="{x:Bind ViewModel.CurrentCashInTill, Mode=OneWay, Converter={StaticResource InlineCurrencyConverter}}" Style="{ThemeResource DisplayTextBlockStyle}" FontWeight="Bold"/>
                    </StackPanel>
                </Border>

      <!-- Vklad -->
      <Border Style="{StaticResource CardBorderStyle}" Shadow="{ThemeResource CardShadow}">
        <StackPanel Spacing="12">
          <TextBlock Text="Vklad" Style="{ThemeResource SubtitleTextBlockStyle}"/>
          <TextBox Header="Částka" PlaceholderText="Zadejte částku..." Text="{x:Bind ViewModel.DepositAmount, Mode=TwoWay, Converter={StaticResource InlineDecimalConverter}}" InputScope="Number"/>
          <Button Content="Provést Vklad" Command="{x:Bind ViewModel.MakeDepositCommand}" HorizontalAlignment="Right"/>
        </StackPanel>
      </Border>

      <!-- Denní kontrola pokladny -->
      <Border Style="{StaticResource CardBorderStyle}" Shadow="{ThemeResource CardShadow}" Visibility="{x:Bind ViewModel.IsSalesRole, Mode=OneWay, Converter={StaticResource BooleanToVisibilityConverter}, ConverterParameter=Inverse}">
        <StackPanel Spacing="12">
          <TextBlock Text="Denní kontrola pokladny" Style="{ThemeResource
  SubtitleTextBlockStyle}"/>
          <TextBox Header="Skutečná hotovost" PlaceholderText="Zadejte skutečnou hotovost..."
  Text="{x:Bind ViewModel.ActualAmountForReconciliation, Mode=TwoWay, Converter={StaticResource InlineDecimalConverter}}" InputScope="Number"/>
          <Button Content="Provést kontrolu" Command="{x:Bind ViewModel.PerformDailyReconciliationCommand}" HorizontalAlignment="Right"/>
        </StackPanel>
      </Border>

      <!-- Uzavírka dne -->
      <Border Style="{StaticResource CardBorderStyle}" Shadow="{ThemeResource CardShadow}" Background="{ThemeResource CardBackgroundFillColorDefaultBrush}">
        <StackPanel Spacing="12">
          <TextBlock Text="Uzavírka dne" Style="{ThemeResource SubtitleTextBlockStyle}" Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"/>
          <TextBlock Text="Uzavírka dne uzavře obchodní den a zaznamená konečný stav pokladny. Tuto operaci lze provést pouze jednou denně." TextWrapping="Wrap" Style="{ThemeResource CaptionTextBlockStyle}"/>
          <TextBox Header="Skutečná hotovost v pokladně" PlaceholderText="Zadejte napočítanou hotovost..."
  Text="{x:Bind ViewModel.DayCloseAmount, Mode=TwoWay, Converter={StaticResource InlineDecimalConverter}}" InputScope="Number"/>
          <TextBlock Text="{x:Bind ViewModel.DayCloseStatusMessage, Mode=OneWay}" Foreground="{ThemeResource SystemErrorTextColor}" TextWrapping="Wrap" Visibility="{x:Bind ViewModel.IsDayCloseError, Mode=OneWay}"/>
          <Button Content="Uzavřít den" Command="{x:Bind ViewModel.PerformDayCloseCommand}" HorizontalAlignment="Right" Style="{ThemeResource AccentButtonStyle}"/>
        </StackPanel>
      </Border>
    </StackPanel>
  </Grid>
</Page>